{"date":"2013-04-15 18:22:09","content":"#sudo apt-get install libftdi1 libftdi-dev libconfuse0 libconfuse-dev cmake\r\n\r\nDownload the latest source code from Telldus at:  <a href=\"http:\/\/download.telldus.se\/TellStick\/Software\/telldus-core\/\">http:\/\/download.telldus.se\/TellStick\/Software\/telldus-core\/<\/a> you can use the wget command for this.\r\n\r\nIn these next commands, Change {version} to the downloaded version.\r\n#cd \/usr\/src\r\n#gunzip telldus-core-{version}.tar.gz\r\n#tar xvf telldus-core-{version}.tar\r\n#mv telldus-core-{version} telldus-core\r\n\r\n#cd telldus-core\r\n#sudo cmake .\r\n#sudo make\r\n#sudo make install\r\n#sudo ldconfig\r\n\r\n#cd \/etc\/init.d\r\n#sudo cp skeleton telldusd\r\nOpen the newly created file in your favorite editor (as root with sudo) and do these changes:\r\n\r\nLine 3, change:\r\n\r\n# Provides:          skeleton\r\ninto:\r\n# Provides:          telldusd\r\n\r\nLine 8-10, change:\r\n\r\n# Short-Description: Example initscript\r\n# Description:       This file should be used to construct scripts to be\r\n#                    placed in \/etc\/init.d.\r\ninto:\r\n# Short-Description: Tellstick service daemon\r\n# Description:       Tellstick service daemon controlling remote switches.\r\n# \r\n\r\nLine 20-24, change:\r\n\r\nPATH=\/sbin:\/usr\/sbin:\/bin:\/usr\/bin\r\nDESC=\"Description of the service\"\r\nNAME=daemonexecutablename\r\nDAEMON=\/usr\/sbin\/$NAME\r\nDAEMON_ARGS=\"--options args\"\r\ninto:\r\n\r\nPATH=\/sbin:\/usr\/sbin:\/bin:\/usr\/bin:\/usr\/local\/sbin\r\nDESC=\"Tellsick service daemon\"\r\nNAME=telldusd\r\nDAEMON=\/usr\/local\/sbin\/$NAME\r\nDAEMON_ARGS=\"\"\r\n\r\nMake the script executable.\r\n#sudo chmod +x telldusd\r\nTest the init-script by starting the service and checking its status.\r\n#sudo service telldusd start\r\n#sudo service telldusd status\r\nInstall the script to start at boot.\r\n#sudo update-rc.d telldusd defaults\r\n\r\nConfiguring the TellStick for each remote power switch: <a href=\"http:\/\/developer.telldus.com\/wiki\/TellStick_conf\">http:\/\/developer.telldus.com\/wiki\/TellStick_conf<\/a>\r\n\r\nFinally use the tdtool command to turn switches on and off! So in this case I am turning on switch 1 (1 as specified in the config file)\r\n\r\n#tdtool --on 1\r\n\r\nTo automate my home setup I have written the following python script, it turns things on using the tellstick when I walk in the room (including sending wake packets to computers etc). It then turns them all off again if I'm gone for more than 5 minutes.\r\n\r\n<a href=\"https:\/\/github.com\/craigmayhew\/scratchpad\/blob\/master\/python\/pir-power.py\">https:\/\/github.com\/craigmayhew\/scratchpad\/blob\/master\/python\/pir-power.py<\/a>\r\n\r\nPlace a copy of it \/home\/pi\/ and edit the root crontab via:\r\n#sudo su\r\n#crontab -e\r\n\r\nThen simply add the line to the bottom of the crontab: \r\n* * * * * python \/home\/pi\/pir-power.py\r\n\r\nif you want to manually kick the script off simply type (in the command line):\r\n#python \/home\/pi\/pir-power.py","title":"RaspberryPi Power Management with a TellStick","status":"publish","name":"raspberrypi-power-management-with-a-tellstick","type":"","tags":["Automation","RaspberryPI","PIR"],"categories":["Guides\/Fixes"],"comments":[]}