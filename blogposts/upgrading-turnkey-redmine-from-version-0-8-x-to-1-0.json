{"date":"2011-08-09 21:00:41","content":"Upgrading the turnkey vm of redmine can be painful:\r\n\r\nHopefully this will take away some of the pain :)\r\n\r\ncd \/var\/www\r\nmv railsapp railsappOLD\r\nsvn co http:\/\/redmine.rubyforge.org\/svn\/branches\/1.0-stable railsapp\r\ncp .\/railsappOLD\/config\/database.yml .\/railsapp\/config\/database.yml\r\ncp .\/railsappOLD\/config\/email.yml .\/railsapp\/config\/email.yml\r\ncp -r .\/railsappOLD\/files .\/railsapp\/files\r\nsudo chown -R root:www-data \/var\/www\/railsapp\r\ncd \/var\/www\/railsapp\r\nsudo chown -R www-data:www-data files log tmp\r\ngem install rails -v=2.3.5\r\ngem install rack\r\ngem install rack -v=1.0.1\r\nrake generate_session_store\r\ngem install -v=0.4.2 i18n\r\nrake generate_session_store\r\nrake db:migrate RAILS_ENV=production\r\nsudo chown -R www-data:www-data files log tmp public\/plugin_assets\r\nrake db:migrate:upgrade_plugin_migrations RAILS_ENV=production\r\nrake db:migrate_plugins RAILS_ENV=production\r\nsudo chmod -R 755 files log\/ tmp\/ public\/plugin_assets\r\nrake tmp:cache:clear\r\nrake tmp:sessions:clear\r\nsudo reboot","title":"Upgrading turnkey redmine from version 0.8.x to 1.0","status":"publish","name":"upgrading-turnkey-redmine-from-version-0-8-x-to-1-0","type":"","tags":["redmine","turnkey linux"],"categories":["Guides\/Fixes"],"comments":[{"author":"Theo","authorEmail":"theo@theotonge.co.uk","authorURL":"","authorIP":"78.86.114.44","timestamp":"2012-01-21 13:37:35","timestampGMT":"2012-01-21 12:37:35","comment":"Very Helpful..\r\n\r\nTo go from 1.0.5 to 1.3 the steps were slightly different:\r\n\r\n\r\n\r\ncd \/var\/www\r\nmv railsapp railsappOLD\r\nsvn co http:\/\/redmine.rubyforge.org\/svn\/branches\/1.3-stable railsapp\r\n\r\ncp .\/railsappOLD\/config\/database.yml .\/railsapp\/config\/database.yml\r\n\r\n# instead of: cp .\/railsappOLD\/config\/email.yml .\/railsapp\/config\/email.yml\r\n# If upgrading from version older than 1.2.0, copy your email settings from your config\/email.yml into the new config\/configuration.yml file that can be created by copying the available configuration.yml.example file.\r\n\r\ncp .\/railsapp\/config\/configuration.yml.example .\/railsapp\/config\/configuration.yml\r\n\r\n# copy content from\r\nvi .\/railsappOLD\/config\/email.yml\r\n\r\n# and copy over to new config (careful not to change the indentation - and it goes at the end)\r\n\r\nvi .\/railsapp\/config\/configuration.yml\r\n\r\ncp -r .\/railsappOLD\/files .\/railsapp\/files\r\nsudo chown -R root:www-data \/var\/www\/railsapp\r\ncd \/var\/www\/railsapp\r\nsudo chown -R www-data:www-data files log tmp\r\ngem install rails -v=2.3.14\r\ngem install rack -v=1.1.1\r\nrake generate_session_store\r\n\r\n#had to do this next one a few times. It kept saying \"ERROR:  Could not find a valid gem 'i18n' (= 0.4.2) in any repository\"\r\ngem install -v=0.4.2 i18n\r\n\r\nrake generate_session_store\r\nrake db:migrate RAILS_ENV=production\r\n\r\n# copy any extra plugins from vendor\/plugins\/\r\ncd vendor\/plugins\/\r\ncp -R ..\/..\/..\/railsappOLD\/vendor\/plugins\/redminelocalavatars .\/\r\ncd ..\/..\/\r\n\r\n\r\nsudo chown -R www-data:www-data files log tmp public\/plugin_assets\r\nrake db:migrate:upgrade_plugin_migrations RAILS_ENV=production\r\n# said: Cannot find old migration table - assuming nothing needs to be done\r\n\r\nrake db:migrate_plugins RAILS_ENV=production\r\nsudo chmod -R 755 files log\/ tmp\/ public\/plugin_assets\r\nrake tmp:cache:clear\r\nrake tmp:sessions:clear\r\n#sudo reboot\r\n\/etc\/init.d\/apache2 restart\r\n \r\n\r\n#After Changing any plugins etc you can restart your Redmine application by updating the date stamp on {Redmine Dir}\/tmp\/restart.txt. This is accomplished by using touch {Redmine Dir}\/tmp\/restart.txt.","browser":"Mozilla\/5.0 (Windows NT 6.1) AppleWebKit\/535.7 (KHTML, like Gecko) Chrome\/16.0.912.75 Safari\/535.7"}]}