{"date":"2013-05-18 08:00:51","content":"First, upgrade rails. This will take some time, go and make a tea\/coffee.\r\n#gem install rails\r\n\r\n#cd \/var\/www\r\n#mv railsapp railsapp-old\r\n#hg clone --updaterev 2.0-stable https:\/\/bitbucket.org\/redmine\/redmine-all railsapp\r\n#cp railsapp-old\/config\/email.yml railsapp\/config\/configuration.yml\r\n#cp railsapp-old\/config\/database.yml railsapp\/config\/database.yml\r\n#cp -r railsapp-old\/files\/ railsapp\/files\/\r\n#chown -R root:www-data \/var\/www\/railsapp\r\n#cd railsapp\r\n#gem install bundler\r\n#gem install test-unit\r\n#bundle install --without development test rmagick\r\n#mkdir public\/plugin_assets\r\n#rake generate_session_store\r\n#rake db:migrate RAILS_ENV=production\r\n\r\nIf at this point you get an error about the mysql-adapter:\r\n\r\nPlease install the mysql adapter: `gem install activerecord-mysql-adapter` (mysql is not part of the bundle. Add it to Gemfile)\r\n\r\nThen edit this file:\r\n#vi config\/database.yml and change all instances of \"adapter: mysql\" to \"adapter: mysql2\".\r\n\r\nThen, install the addon:\r\n#gem install activerecord-mysql2-adapter\r\n\r\nedit you Gemfile\r\n#vi Gemfile\r\n\r\nreplace the section:\r\nplatforms :mri_18, :mingw_18 do\r\n  group :mysql do\r\n    gem \"mysql\"\r\n  end\r\nend\r\n\r\nwith:\r\n\r\nplatforms :mri_18, :mingw_18 do\r\n  group :mysql do\r\n    #gem \"mysql\"\r\n    gem \"mysql2\", \"~> 0.3.11\"\r\n  end\r\nend\r\n\r\nthen run this again and hopefully it should work:\r\n#rake db:migrate RAILS_ENV=production\r\n\r\nchown -R www-data:www-data files log tmp public\/plugin_assets\r\nrake db:migrate:upgrade_plugin_migrations RAILS_ENV=production\r\n\r\nIf you find this errors with: \"don't know how to build task 'db:migrate:upgrade_plugin_migrations'\".\r\nthen use this instead:\r\n#rake redmine:plugins:migrate RAILS_ENV=production\r\n\r\nthis next one may error, ignore it if it does\r\n#rake db:migrate_plugins RAILS_ENV=production\r\n\r\n#chmod -R 755 files log\/ tmp\/ public\/plugin_assets\r\n#rake tmp:cache:clear\r\n#rake tmp:sessions:clear\r\n\r\n\r\nReferences:\r\n<a href=\"http:\/\/www.turnkeylinux.org\/forum\/general\/20120722\/guide-how-upgrade-redmine-latest-version-203-painlessly\">http:\/\/www.turnkeylinux.org\/forum\/general\/20120722\/guide-how-upgrade-redmine-latest-version-203-painlessly<\/a>\r\n<a href=\"http:\/\/www.redmine.org\/boards\/2\/topics\/33504\">http:\/\/www.redmine.org\/boards\/2\/topics\/33504<\/a>","title":"Upgrading turnkey redmine from 1.3.0.stable.8673 to 2.0.4.stable","status":"publish","name":"upgrading-turnkey-redmine-from-1-3-0-stable-8673-to-2-0-4-stable","type":"","tags":["redmine"],"categories":["General"],"comments":[]}