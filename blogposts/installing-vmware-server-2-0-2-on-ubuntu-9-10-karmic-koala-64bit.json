{"date":"2009-11-03 08:00:28","content":"I recently upgraded to Ubuntu Karmic Koala and fully expected this to break my VMWare server install. Sure enough I got plenty of errors when trying to compile VMWare Server with the latest kernel. Here's the solution:\r\n\r\nDownload VMware Server (<a target=\"_blank\" href=\"https:\/\/www.vmware.com\/freedownload\/p\/download.php?product=server20\" title=\"VMware Server 2.0.1\">2.0.1<\/a> or <a target=\"_blank\" href=\"http:\/\/www.vmware.com\/download\/server\/getserver.html\" title=\"VMware Server 2.0.2\">2.0.2<\/a>) \u0096 in gz format. You will also need a license key.\r\n\r\n<strong>If you have tried to install vmware server already and something went wrong during the install, then do these two steps first:<\/strong>\r\n\r\nfirst, delete the vmware modules\r\n<pre style=\"border: 1px solid #FFFFFF; padding: 5px; overflow:auto;\">\r\nrm -rf \/usr\/lib\/vmware\/modules\/\r\n<\/pre>\r\n\r\nif needed (you\u0092ll know if you need to do this one):\r\n<pre style=\"border: 1px solid #FFFFFF; padding: 5px; overflow:auto;\">\r\nrm -rf \/lib\/modules\/2.6.31-13-server\/misc\/vm*\r\n<\/pre>\r\n\r\n\r\n<strong>Install:<\/strong>\r\n\r\nRun vmware-install.pl. Somewhere in the installation process you should be asked:\r\nDo you want this program to invoke the command for you now? [yes]\r\nyou should answer: no\r\n\r\nThen run the patch <a href=\"\/files\/vmware\/VMWare-Server-2.0.1-Patch.tar\">vmware-server.2.0.1_x64-modules-2.6.30.4-fix.sh<\/a>.\r\n<pre style=\"border: 1px solid #FFFFFF; padding: 5px; overflow:auto;\">sudo .\/vmware-server.2.0.1_x64-modules-2.6.30.4-fix.sh\r\n<\/pre>\r\n\r\nAfter this, run \r\n<pre style=\"border: 1px solid #FFFFFF; padding: 5px; overflow:auto;\">\r\n\/usr\/bin\/vmware-config.pl\r\n<\/pre>\r\n\r\nIf the vmware-config.pl aborts, because it couldn't shut down all vmware services then kill them manually and then rerun vmware-config.pl:\r\n<pre style=\"border: 1px solid #FFFFFF; padding: 5px; overflow:auto;\">\r\nkill -9 $( grep -i vm | awk '{ print $2 }' )\r\n<\/pre>\r\n\r\nAnd hopefully that should work!","title":"Installing VMware server 2.0.2 on Ubuntu 9.10 Karmic Koala 64bit","status":"publish","name":"installing-vmware-server-2-0-2-on-ubuntu-9-10-karmic-koala-64bit","type":"","tags":["Ubuntu 9.10","Karmic Koala","VMware server 2.0.2"],"categories":["Guides\/Fixes","Linux\/Ubuntu"],"comments":[{"author":"Will","authorEmail":"whlspacedude@gmail.com","authorURL":"","authorIP":"149.166.8.26","timestamp":"2009-11-03 17:07:24","timestampGMT":"2009-11-03 16:07:24","comment":"Im kind of new at this but how do you patch?","browser":"Mozilla\/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.4) Gecko\/20091028 Ubuntu\/9.10 (karmic) Firefox\/3.5.4"},{"author":"Craig Mayhew","authorEmail":"craig@mayhew.io","authorURL":"http:\/\/","authorIP":"86.7.228.177","timestamp":"2009-11-03 19:57:46","timestampGMT":"2009-11-03 18:57:46","comment":"Hi Will, thanks for spotting that. I've added the line \"sudo .\/vmware-server.2.0.1_x64-modules-2.6.30.4-fix.sh\" which I had previously missed from the post.","browser":"Mozilla\/5.0 (X11; U; Linux x86_64; en-GB; rv:1.9.1.4) Gecko\/20091028 Ubuntu\/9.10 (karmic) Firefox\/3.5.4"},{"author":"forbzie","authorEmail":"forbzie22@gmail.com","authorURL":"","authorIP":"212.69.52.188","timestamp":"2009-11-03 22:01:24","timestampGMT":"2009-11-03 21:01:24","comment":"Does this work for 32bit ?\r\n\r\nwhen running shell script i get\r\n\r\nvmware-server.2.0.1_x64-modules-2.6.30.4-fix.sh: 30: Syntax error: word unexpected (expecting \"do\")","browser":"Mozilla\/5.0 (X11; U; Linux i686; en-GB; rv:1.9.1.4) Gecko\/20091028 Ubuntu\/9.10 (karmic) Firefox\/3.5.4"},{"author":"Wil","authorEmail":"wjs@tigernet.net","authorURL":"","authorIP":"173.74.8.34","timestamp":"2009-11-04 00:33:51","timestampGMT":"2009-11-03 23:33:51","comment":"When I try to run that command I get 'command not found'\r\n\r\n?????","browser":"Mozilla\/4.0 (compatible; MSIE 8.0; Windows NT 6.0; WOW64; Trident\/4.0; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; InfoPath.2; OfficeLiveConnector.1.3; OfficeLivePatch.0.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729)"},{"author":"ubuntuvwmareuser","authorEmail":"noemail@ibm.nl","authorURL":"http:\/\/nowebsite","authorIP":"88.159.80.172","timestamp":"2009-11-06 14:10:57","timestampGMT":"2009-11-06 13:10:57","comment":"@Wil\r\n\r\npatch pkg should be installed : pkg-add install patch","browser":"Mozilla\/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.4) Gecko\/20091028 Ubuntu\/9.10 (karmic) Firefox\/3.5.4"},{"author":"debmalya","authorEmail":"sunnywizard@gmail.com","authorURL":"http:\/\/debmalyasinha.wordpress.com","authorIP":"203.110.243.21","timestamp":"2009-11-18 13:36:59","timestampGMT":"2009-11-18 12:36:59","comment":"Hello Craig,\r\n\r\nWhenever I am trying to execute  \"sudo .\/vmware-server.2.0.1_x64-modules-2.6.30.4-fix.sh\" it's showing...\r\n\r\nsudo: .\/vmware-server.2.0.1_x64-modules-2.6.30.4-fix.sh: command not found\r\n\r\nCan you please help me out of this?","browser":"Mozilla\/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.5) Gecko\/20091109 Ubuntu\/9.10 (karmic) Firefox\/3.5.5"},{"author":"tony","authorEmail":"teus@tpg.com.au","authorURL":"","authorIP":"220.244.2.144","timestamp":"2009-11-25 01:17:15","timestampGMT":"2009-11-25 00:17:15","comment":"Thanks Craig, that worked perfectly 1st time around. You've saved me tons of time! \r\n\r\nCheers! :)","browser":"Mozilla\/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.5) Gecko\/20091109 Ubuntu\/9.10 (karmic) Firefox\/3.5.5"},{"author":"fixer","authorEmail":"fixer@nofind.com","authorURL":"http:\/\/none","authorIP":"15.203.233.77","timestamp":"2009-12-10 00:32:54","timestampGMT":"2009-12-09 23:32:54","comment":"The \"command not found\" error is because of Microsoft end of line characters in the shell script.  (How did that happen?)  Anyway, if you try to run the shell script without sudo, you will see:\r\n\r\nbash: .\/vmware-server.2.0.1_x64-modules-2.6.30.4-fix.sh: \/bin\/sh^M: bad interpreter: No such file or directory\r\n\r\nTo fix the shell script, first run:\r\nperl -pi -e 's\/\\r\\n\/\\n\/;' vmware-server.2.0.1_x64-modules-2.6.30.4-fix.sh","browser":"Mozilla\/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.2) Gecko\/20090729 Firefox\/3.5.2"},{"author":"Sam","authorEmail":"samericka@gmail.com","authorURL":"","authorIP":"189.217.102.5","timestamp":"2009-12-16 23:07:33","timestampGMT":"2009-12-16 22:07:33","comment":"Thanks, worked fine.\r\n\r\nMake sure you follow instructions to the letter or it will fail.","browser":"Mozilla\/5.0 (X11; U; Linux x86_64; en-US) AppleWebKit\/532.5 (KHTML, like Gecko) Chrome\/4.0.249.30 Safari\/532.5"},{"author":"cyqotiq","authorEmail":"jnsatterfield@gmail.com","authorURL":"http:\/\/cyqotiq.blogspot.com","authorIP":"24.214.196.234","timestamp":"2009-12-24 06:34:17","timestampGMT":"2009-12-24 05:34:17","comment":"You, sir, are a saint!  I've been trying to find the fix for the 64-bit karmic kernel.  The closest I came was finding the 2.6.30 patch, which failed miserably.  This worked like a charm!","browser":"Mozilla\/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.6) Gecko\/20091215 Ubuntu\/9.10 (karmic) Firefox\/3.5.6"},{"author":"Craig Mayhew","authorEmail":"craig@mayhew.io","authorURL":"http:\/\/","authorIP":"86.5.66.13","timestamp":"2009-12-29 16:55:54","timestampGMT":"2009-12-29 15:55:54","comment":"@fixer Thanks for spotting that. I must have uploaded it from a windows machine (won't make that mistake again!). I've now uploaded a corrected version of the patch.","browser":"Mozilla\/5.0 (Windows; U; Windows NT 6.0; en-GB; rv:1.9.1.6) Gecko\/20091201 Firefox\/3.5.6 (.NET CLR 3.5.30729)"},{"author":"Craig Mayhew","authorEmail":"craig@mayhew.io","authorURL":"http:\/\/","authorIP":"86.5.66.13","timestamp":"2010-01-03 01:35:25","timestampGMT":"2010-01-03 00:35:25","comment":"If you need to rerun vmware-config-tools and know you only want the default values then this command will make it much quicker by automatically using the defaults:\r\n\r\n\/usr\/bin\/vmware-config-tools.pl --default","browser":"Mozilla\/5.0 (X11; U; Linux x86_64; en-GB; rv:1.9.1.6) Gecko\/20091215 Ubuntu\/9.10 (karmic) Firefox\/3.5.6"},{"author":"macke","authorEmail":"lehmarc87@googlemail.de","authorURL":"","authorIP":"129.241.62.139","timestamp":"2010-02-01 14:58:37","timestampGMT":"2010-02-01 13:58:37","comment":"Am I right when i think i need to download the patch before i am able to patch my vmware? Unfortunately there is no file appearing after i click the link. How can i find it again?","browser":"Mozilla\/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.17) Gecko\/2010010604 Ubuntu\/8.04 (hardy) Firefox\/3.0.17"},{"author":"Craig Mayhew","authorEmail":"craig@mayhew.io","authorURL":"","authorIP":"86.5.66.13","timestamp":"2010-02-17 10:31:32","timestampGMT":"2010-02-17 09:31:32","comment":"@macke I've fixed that, I had an error with the downloads section.","browser":"Mozilla\/5.0 (X11; U; Linux x86_64; en-GB; rv:1.9.1.7) Gecko\/20100106 Ubuntu\/9.10 (karmic) Firefox\/3.5.7"},{"author":"Ian Justman","authorEmail":"ianj@ian-justman.com","authorURL":"","authorIP":"98.242.16.98","timestamp":"2010-02-15 06:21:44","timestampGMT":"2010-02-15 05:21:44","comment":"This procedure does NOT work with my install of Ubuntu 9.10 x86-64.  The kernel in use is 2.6.31-19 and I get the following at link-time:\r\n\r\n  LD [M]  \/tmp\/vmware-config1\/vsock-only\/vsock.o\r\n  Building modules, stage 2.\r\n  MODPOST 1 modules\r\nWARNING: \"VMCIDatagram_CreateHnd\" [\/tmp\/vmware-config1\/vsock-only\/vsock.ko] undefined!\r\nWARNING: \"VMCIDatagram_DestroyHnd\" [\/tmp\/vmware-config1\/vsock-only\/vsock.ko] undefined!\r\nWARNING: \"VMCI_GetContextID\" [\/tmp\/vmware-config1\/vsock-only\/vsock.ko] undefined!\r\nWARNING: \"VMCIDatagram_Send\" [\/tmp\/vmware-config1\/vsock-only\/vsock.ko] undefined!\r\n  CC      \/tmp\/vmware-config1\/vsock-only\/vsock.mod.o\r\n  LD [M]  \/tmp\/vmware-config1\/vsock-only\/vsock.ko\r\nmake[1]: Leaving directory `\/usr\/src\/linux-headers-2.6.31-19-server'\r\ncp -f vsock.ko .\/..\/vsock.o\r\nmake: Leaving directory `\/tmp\/vmware-config1\/vsock-only'\r\nUnable to make a vsock module that can be loaded in the running kernel:\r\ninsmod: error inserting '\/tmp\/vmware-config1\/vsock.o': -1 Unknown symbol in module","browser":"Mozilla\/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2) Gecko\/20100115 Firefox\/3.6"},{"author":"Ian Justman","authorEmail":"ianj@ian-justman.com","authorURL":"","authorIP":"64.203.112.2","timestamp":"2010-02-19 18:53:29","timestampGMT":"2010-02-19 17:53:29","comment":"I found something that allows vsock to be built; it involves patching the vmware-config.pl file.  There's a patch attached to this post on a thread on the very subject:\r\n\r\nhttp:\/\/ubuntuforums.org\/showpost.php?p=6267637&amp;postcount=17\r\n\r\nWorked just fine here once I applied your patch and this one.\r\n\r\n--Ian.","browser":"Mozilla\/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.8) Gecko\/20100202 Firefox\/3.5.8 (.NET CLR 3.5.30729)"},{"author":"Craig Mayhew","authorEmail":"craig@mayhew.io","authorURL":"","authorIP":"86.5.66.13","timestamp":"2010-03-27 23:19:10","timestampGMT":"2010-03-27 22:19:10","comment":"Another great resource for debugging VMWare Server issues: https:\/\/help.ubuntu.com\/community\/VMware\/Server","browser":"Mozilla\/5.0 (Windows; U; Windows NT 6.0; en-GB; rv:1.9.2.2) Gecko\/20100316 Firefox\/3.6.2 (.NET CLR 3.5.30729)"},{"author":"Sharyl","authorEmail":"","authorURL":"","authorIP":"64.191.125.121","timestamp":"2013-03-14 06:36:34","timestampGMT":"2013-03-14 05:36:34","comment":"<strong>Sharyl...<\/strong>\r\n\r\nInstalling VMware server 2.0.2 on Ubuntu 9.10 Karmic Koala 64bit - Craig Mayhew?s Blog...","browser":"PHP\/5.2.10"}]}